# KEYVAULTS & ENTRUST CERTIFICATES

B2C provides full support for the usage of certificates to encrypt and decrypt tokens that are sent and received by client applications. Furthermore, since a custom domain is leveraged with TLS, a certificate is required for the AFD CDN in front of AB2C. These certificates are directly installed in both AB2C and AFD however it is recommended that the CSR’s are generated from Azure KeyVaults and once created by the Entrust CA, KeyVaults should be leveraged to generate the PFX files that are installed in both platforms. This ensures that administrators are aware of where the certificates are and when they expire. At the same time, for apps that are leveraging “secrets” (keys) instead of certificates to authenticate using the App Registration, these secrets can be referenced in Azure KeyVault’s via their Secret ID. By using the KeyVaults to centralize all of the certs and keys for B2C and AFD, the Department has control over who is accessing these certs, how, and when they need to be renewed.  Furthermore, the release pipeline automation for deploying AB2C artefacts (polices) leverages Variable Groups that are linked to the Azure KeyVaults hosting the certs and secrets to avoid referencing secrets or certificates directly in configuration files in DevOps / service connections.
